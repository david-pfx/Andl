// Test suite setup data and common library functions

#catalog new update

test_count := 0
error_count := 0
assert(lineno:0, condition:bool) => do { 
    test_count := test_count + 1
    if(condition, 
        do{}, 
        do {
            error_count := error_count + 1
            write('>>>FAIL: line no ' & lineno)
        }
    ) 
}
start(filename:'') => do {
    write( now() & " Test suite for '" & filename & "'")
}
finish(filename:'') => do { 
    write( now() & " Test suite for '" & filename & "' complete. Tests = " & test_count & " errors = " & error_count)
}

// Supplier data set in Andl format
// This is the standard data set used in books by Date and Darwen
S := {{ S#:text, SNAME:text, STATUS:number,CITY:text }
    ( "S1", "Smith", 20, "London" ),
    ( "S2", "Jones", 10, "Paris" ),
    ( "S3", "Blake", 30, "Paris" ),
    ( "S4", "Clark", 20, "London" ),
    ( "S5", "Adams", 30, "Athens" )
    }
P := {{ P#:text,PNAME:text,COLOR:text,WEIGHT:number,CITY:text }
    ( "P1","Nut",   "Red",  12.0,"London" ),
    ( "P2","Bolt",  "Green",17.0,"Paris"  ),
    ( "P3","Screw", "Blue", 17.0,"Oslo"   ),
    ( "P4","Screw", "Red",  14.0,"London" ),
    ( "P5","Cam",   "Blue", 12.0,"Paris"  ),
    ( "P6","Cog",   "Red",  19.0,"London" )
}
SP := {{ S#:text, P#:text, QTY:number }
    ( "S1","P1",300 ),
    ( "S1","P2",300 ),
    ( "S1","P3",400 ),
    ( "S1","P4",200 ),
    ( "S1","P5",100 ),
    ( "S1","P6",100 ),
    ( "S2","P1",300 ),
    ( "S2","P2",400 ),
    ( "S3","P2",200 ),
    ( "S4","P2",200 ),
    ( "S4","P4",300 ),
    ( "S4","P5",400 )
}
J := {{J#:text,JNAME:text,CITY:text}
    ( "J1", "Sorter",  "Paris"  ),
    ( "J2", "Display", "Rome"   ),
    ( "J3", "OCR",     "Athens" ),
    ( "J4", "Console", "Athens" ),
    ( "J5", "RAID",    "London" ),
    ( "J6", "EDS",     "Oslo"   ),
    ( "J7", "Tape",    "London" ),
}
SPJ := {{S#:text,P#:text,J#:text,QTY:number}
    ( "S1","P1","J1",200 ),
    ( "S1","P1","J4",700 ),
    ( "S2","P3","J1",400 ),
    ( "S2","P3","J2",200 ),
    ( "S2","P3","J3",200 ),
    ( "S2","P3","J4",500 ),
    ( "S2","P3","J5",600 ),
    ( "S2","P3","J6",400 ),
    ( "S2","P3","J7",800 ),
    ( "S2","P5","J2",100 ),
    ( "S3","P3","J1",200 ),
    ( "S3","P4","J2",500 ),
    ( "S4","P6","J3",300 ),
    ( "S4","P6","J7",300 ),
    ( "S5","P2","J2",200 ),
    ( "S5","P2","J4",100 ),
    ( "S5","P5","J5",500 ),
    ( "S5","P5","J7",100 ),
    ( "S5","P6","J2",200 ),
    ( "S5","P1","J4",100 ),
    ( "S5","P3","J4",200 ),
    ( "S5","P4","J4",800 ),
    ( "S5","P5","J4",400 ),
    ( "S5","P6","J4",500 )
}
